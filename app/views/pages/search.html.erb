<div class="search_container">
    <%= simple_form_for :search, url: profiles_path, method: "get" do |f| %>
          <div class="form-group">
            <input class="form-control string required" type="text" name="location" id="location-search-box" placeholder="find a friend anywhere...">
          </div>
          <h3 id="interest-headline"> I am interested in...</h3>
          <div class="form-group">
            <input type="hidden" name="filter[interest_ids][]" value="">
            <div class="interest-choices">
              <% Interest.all.each do |interest| %>
                <input type="checkbox" class="hidden"  value="<%= interest.id %>" name="filter[interest_ids][]"
                id="filter_interest_ids_<%= interest.id %>">
                <label class="interest-choice" for="filter_interest_ids_<%= interest.id %>">
                  <%= interest.name %> <hr style="margin-bottom: 0; margin-top:0">
                  <%= image_tag(interest.icon_path, class: "interest_icon") %>

                </label>

              <% end %>
            </div>
          </div>
          <%= f.button :submit, class: "btn orange-button", value: "Find a friend" %>
    <% end %>
</div>

<% content_for(:after_js) do %>
  <script type="text/javascript">
      $(".interest-choice").click(function(){
        $(this).toggleClass("active");
      });

      function onPlaceChanged() {
        var place = this.getPlace();
        var location = document.getElementById('location-search-box');
      }

      document.addEventListener("DOMContentLoaded", function() {
        var location = document.getElementById('location-search-box');

        if (location) {
          var autocomplete = new google.maps.places.Autocomplete(location, { types: ['geocode'] });
          google.maps.event.addListener(autocomplete, 'place_changed', onPlaceChanged);
        }
      });
  </script>
<% end %>
